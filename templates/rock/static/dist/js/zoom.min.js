!function(o){function i(i){i&&i.preventDefault();var e=o(this),t=e.attr("href");if(t){var n=o(new Image).hide();o("#zoom .previous, #zoom .next").show(),e.hasClass("zoom")&&o("#zoom .previous, #zoom .next").hide(),d||(d=!0,l.show(),o("body").addClass("zoomed")),h.html(n).delay(500).addClass("loading"),n.load(function(){function i(o){o.show(),h.removeClass("loading")}var e=o(this),t=parseInt(h.css("borderLeftWidth")),n=s-2*t,a=c-2*t,l=e.width(),d=e.height();if(l==h.width()&&l<=n&&d==h.height()&&d<=a)i(e);else{if(l>n||d>a){var r=a<d?a:d,w=n<l?n:l;r/d<=w/l?(e.width(l*r/d),e.height(r)):(e.width(w),e.height(d*w/l))}h.animate({width:e.width(),height:e.height(),marginTop:-e.height()/2-t,marginLeft:-e.width()/2-t},200,function(){i(e)})}}).attr("src",t),r=e}}function e(){var i=r.parent("li").prev();0==i.length&&(i=o(".gallery li:last-child")),i.find("a").trigger("click")}function t(){var i=r.parent("li").next();0==i.length&&(i=o(".gallery li:first-child")),i.children("a").trigger("click")}function n(i){i&&i.preventDefault(),d=!1,r=null,l.hide(),o("body").removeClass("zoomed"),h.empty()}function a(){s=o(window).width(),c=o(window).height()}o("body").append('<div id="zoom"><a class="close"></a><a href="#previous" class="previous"></a><a href="#next" class="next"></a><div class="content loading"></div></div>');var l=o("#zoom").hide(),h=o("#zoom .content"),d=!1,r=null,s=o(window).width(),c=o(window).height();l.on("click",function(i){i.preventDefault(),"zoom"==o(i.target).attr("id")&&n()}),o("#zoom .close").on("click",n),o("#zoom .previous").on("click",e),o("#zoom .next").on("click",t),o(document).keydown(function(o){r&&(38!=o.which&&40!=o.which||o.preventDefault(),27==o.which&&n(),37!=o.which||r.hasClass("zoom")||e(),39!=o.which||r.hasClass("zoom")||t())}),1==o(".gallery li a").length&&o(".gallery li a")[0].addClass("zoom"),o(".zoom, .gallery li a").on("click",i),o(window).on("resize",a),o(window).on("mousewheel DOMMouseScroll",function(o){r&&(o.stopPropagation(),o.preventDefault(),o.cancelBubble=!1)})}(jQuery);